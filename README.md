# MovieLens Explorer

A containerized Flask web application for exploring movie ratings and generating genre-based recommendations using the MovieLens dataset.

## 1. Executive Summary



## 2. System Overview

This project demonstrates the following DS 2022 concepts:
- **Docker Containters** - Docker containerization for reproducible deployment
- **Serving APIs** - Flask REST API for data serving
- **Scripting Pipelines** - Automated data transformation and loading

### Architecture


The application follows a three-tier architecture:

1. **Data Layer**: CSV files from MovieLens dataset (movies, ratings)
2. **Processing Layer**: Python pandas for data transformation and aggregation
3. **Presentation Layer**: Flask web server with HTML templates and REST API endpoints




### Data Source

**Dataset**: MovieLens Latest Small Dataset (this is the smaller version of a dataset describing ratings from MovieLens, a movie recommendation service)
- **Source**: [GroupLens Research](https://grouplens.org/datasets/movielens/)
- **Size**: 100,836 ratings across 9,742 movies (data generated by 610 users)
- **Format**: CSV files (movies.csv, ratings.csv)

**License**: Available for education and research purposes
**Citation**: F. Maxwell Harper and Joseph A. Konstan. 2015. The MovieLens Datasets: History and Context. ACM Transactions on Interactive Intelligent Systems (TiiS) 5, 4: 19:1–19:19.



## 3. How to Run (Local)

**Quick Start Command**

```bash
./run.sh
```

The `run.sh` script builds a Docker image for the MovieLens API, stops and removes any existing container with the same name, then runs a new container in detached mode on port 5000.


### Access the Application
- Web Interface: http://localhost:5000
- API Endpoints:
    - GET / - Home page with statistics
    - GET /movies - Browse popular movies
    - GET /movie/<id> - View specific movie details
    - GET /recommend/<id> - Get movie recommendations
    - GET /api/movies - JSON API for movies list
    - GET /api/movie/<id> - JSON API for movie details


### 4. Design Decisions

Why this concept? Alternatives considered and why not chosen.


**Security Ops:** The app follows secure practices including environment-based configuration for sensitive settings and strong input validation. Search terms are hashed before storage to protect user privacy, and no personally identifiable information is collected or transmitted. Additional safeguards include XSS protection, error handling, and configurable limits on all user inputs.

**Logs/Metrics:** The app uses a structured logging system built on Python’s logging module, with both console and rotating file handlers to prevent uncontrolled file growth. Key events such as startup actions, user search queries, invalid inputs, file I/O issues, and route-level errors are recorded with appropriate log levels (such as DEBUG, INFO, ERROR, and WARNING). Logging behavior is fully configurable through environment variables. 

**Scaling and Limitations:** The current architecture works well for a small dataset (used the smaller version from MovieLens) and light usage (minimal users), making it fully adequate for the scope of this project. Also, this project relies on in-memory data loaded from CSV files. While this is fine for the dataset size used here, supporting larger datasets or higher traffic would require components such as a dedicated database and a production-grade server, to ensure the system can scale reliably. Running on Flask’s development server without authentication, caching, or scaling support means the app isn’t suitable for handling many users, large datasets, or sensitive data in a production environment. 

Additionally, the dataset itself is limited in range as well, as it only contains ratings up to 2018, meaning the system is lacking in more recent movie trends.

**The Tradeoff:** The app is designed to be simple and low-cost (small dataset, data loading practices, Flash deployment), which makes it easier to build and maintain for a class project. This does mean lower performance and limited scalability, but those tradeoffs are acceptable given the project’s small scope and single-user environment.



### 5. Results & Evaluation

**Screenshots**

**Home Page**
![Home Page](assets/screenshots/home-page.png)
*The main landing page with search functionality and statistics*

**Movie Details Page**
![Movie Details](assets/screenshots/movie-details.png)
*Movie information with star ratings, similar movies recommendations, and ratings over time chart*

**Genre Profile**
![Genre Profile](assets/screenshots/genre-profile.png)
*User's genre analytics with pie chart and top 3 genres*

**Search Results**
![Search Results](assets/screenshots/search-results.png)
*Live search results appearing as user types*


**Performance Notes**

- **Startup Time**: ~2-3 seconds to load dataset (ml-latest-small: 9,742 movies, 100,836 ratings)
- **Memory Usage**: ~50-100MB for in-memory data structures
- **Response Times**: 
  - Home page: <100ms
  - Movie details: <200ms
  - Search API: <150ms
  - Ratings over time: <300ms (includes CSV read)


**Validation/Tests Performed and Outcomes**

The automated smoke tests (tests/test_api.py) confirm that all core endpoints (home page, movies, movie id, recommend id, and api movies) return successful responses and valid JSON where expected. 

The security validation automated in code (src/app.py) does the following:
- The function *sanitize_input(text, max_length=MAX_SEARCH_LENGTH)* removes null bytes, controls characters, enforces length limits
- The function *hash_search_term(search_term)* hashes search terms with SHA256 before storage



### 6. What's Next 


**Planned improvements:** Code can be reorganized into clearer modules and services, with data access separated from routing logic. This code could also migrate from csv files to SQL for better performance and data loading/storage. Additional testing would also be necessary as the project grows. Future enhancements could include 
- More advanced recommendation models (going beyond just genre and implementing a user’s watch history and current movie trends), which would require better data management (using database such as SQL) and more advanced datasets (could possibly combine information from different movie datasets).
- Better analytics visualizations (which can be more personalized and insightful when generated among a backdrop of more user data, such as comparing results with other users)
- User-focused upgrades like watchlists or movie posters to enhance engagement


### 7. Links 

GitHub Repo Link: https://github.com/brewste/systemsproject.git

*Note: While i was originally working with another repo, I encountered errors with merging so switched to this new one, which is why most of the commits are more recent.*





## License and Acknowledgments

This project is licensed under the MIT License - see the LICENSE file for details.

MovieLens dataset provided by GroupLens Research






